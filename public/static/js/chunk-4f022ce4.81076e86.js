(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f022ce4"],{"11fb":function(e,t,n){},4678:function(e,t,n){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e9","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e9","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id="4678"},6294:function(e,t,n){"use strict";n.d(t,"o",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"l",(function(){return l})),n.d(t,"e",(function(){return i})),n.d(t,"x",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"B",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"y",(function(){return b})),n.d(t,"w",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"j",(function(){return y})),n.d(t,"c",(function(){return g})),n.d(t,"p",(function(){return v})),n.d(t,"t",(function(){return _})),n.d(t,"h",(function(){return j})),n.d(t,"r",(function(){return k})),n.d(t,"g",(function(){return S})),n.d(t,"z",(function(){return O})),n.d(t,"q",(function(){return C})),n.d(t,"f",(function(){return x})),n.d(t,"s",(function(){return A})),n.d(t,"A",(function(){return w})),n.d(t,"v",(function(){return D})),n.d(t,"d",(function(){return P})),n.d(t,"u",(function(){return z})),n.d(t,"m",(function(){return F}));var o=n("b775"),a=n("f367");function r(e){return Object(o["a"])({url:"/cloud_providers",method:"get",params:e})}function s(e){return Object(o["a"])({url:"/cloud_provider",method:"post",data:e})}function l(e,t){return Object(o["a"])({url:"/cloud_provider/"+e,method:"put",data:t})}function i(e){return Object(o["a"])({url:"/cloud_provider/"+e+"/vultr/check",method:"get"})}function c(e){return Object(o["a"])({url:"/cloud_provider/"+e+"/vultr/instances",method:"get"})}function u(e,t){return Object(o["a"])({url:"/cloud_provider/"+e+"/vultr/instance",method:"post",data:t})}function d(e,t,n){return Object(o["a"])({url:"/cloud_provider/"+e+"/vultr/instance/"+t,method:"patch",data:n})}function f(e,t){return Object(o["a"])({url:"/cloud_provider/"+e+"/vultr/instance/"+t,method:"delete"})}function p(e,t){return Object(o["a"])({url:"/cloud_provider/"+e+"/vultr/instance/"+t+"/ansible/ops/logs",method:"get"})}function b(e,t,n){return Object(a["a"])({url:"/cloud_provider/"+e+"/vultr/instance/"+t+"/ansible/ops",method:"post",data:n})}function m(e){return Object(o["a"])({url:"/cloud_provider/"+e+"/vultr/sshkeys",method:"get"})}function h(e,t){return Object(o["a"])({url:"/cloud_provider/"+e+"/vultr/sshkey",method:"post",data:t})}function y(e,t){return Object(o["a"])({url:"/cloud_provider/"+e+"/vultr/sshkey/"+t,method:"delete"})}function g(e){return Object(o["a"])({url:"/cloud_provider/"+e+"/cloudflare/check",method:"get"})}function v(e){return Object(o["a"])({url:"/cloud_provider/"+e+"/cloudflare/accounts",method:"get"})}function _(e){return Object(o["a"])({url:"/cloud_provider/"+e+"/cloudflare/zones",method:"get"})}function j(e,t){return Object(o["a"])({url:"/cloud_provider/"+e+"/cloudflare/zone",method:"post",data:t})}function k(e,t){return Object(o["a"])({url:"/cloud_provider/"+e+"/cloudflare/zones/"+t+"/dns_records",method:"get"})}function S(e,t,n){return Object(o["a"])({url:"/cloud_provider/"+e+"/cloudflare/zones/"+t+"/dns_records",method:"post",data:n})}function O(e,t,n,a){return Object(o["a"])({url:"/cloud_provider/"+e+"/cloudflare/zones/"+t+"/dns_records/"+n,method:"patch",data:a})}function C(e,t){return Object(o["a"])({url:"/cloud_provider/"+e+"/cloudflare/zones/"+t+"/certificates",method:"get"})}function x(e,t,n){return Object(o["a"])({url:"/cloud_provider/"+e+"/cloudflare/zones/"+t+"/certificates",method:"post",data:n})}function A(e,t){return Object(a["a"])({url:"/cloud_provider/"+e+"/cloudflare/zones/"+t+"/settings/ssl",method:"get"})}function w(e,t,n){return Object(o["a"])({url:"/cloud_provider/"+e+"/cloudflare/zones/"+t+"/settings/ssl",method:"patch",data:n})}function D(e,t){return Object(a["a"])({url:"/local_vps/cloud_provider/"+e+"/vultr/instance/"+t,method:"get"})}function P(e){return Object(o["a"])({url:"/cloud_provider/"+e+"/godaddy/check",method:"get"})}function z(e){return Object(o["a"])({url:"/cloud_provider/"+e+"/godaddy/domains",method:"get"})}function F(e,t,n){return Object(a["a"])({url:"/cloud_provider/"+e+"/godaddy/domains/"+t,method:"patch",data:n})}},9631:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticStyle:{"font-size":"20px","margin-bottom":"18px"}},[e._v("Clouder Provider-VPS")]),void 0==e.providerConfig.id?n("div",{staticClass:"empty-list"},[n("el-button",{attrs:{type:"primary"}},[e._v("Add Account")])],1):[n("div",{staticStyle:{"margin-bottom":"18px"}},[n("el-button",{attrs:{icon:"el-icon-setting"},on:{click:function(t){return e.editProviderBtnHandler("vps")}}},[e._v("Vultr")])],1),n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"Instances"}},[0==e.vultrInstances.length?n("div",{staticClass:"empty-list"},[n("el-button",{attrs:{type:"primary"},on:{click:e.showAddInstanceDialog}},[e._v("Add Instance")])],1):[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showAddInstanceDialog}},[e._v("Add Instance")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.vultrInstances}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"300"}}),n("el-table-column",{attrs:{prop:"main_ip",label:"IP",width:"180"}}),n("el-table-column",{attrs:{prop:"status",label:"Status",width:"180"}}),n("el-table-column",{attrs:{prop:"power_status",label:"Power Status",width:"180"}}),n("el-table-column",{attrs:{prop:"date_created",label:"Created At",width:"200",formatter:e.dateFormatter}}),n("el-table-column",{attrs:{label:"Operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.showAnsibleRunDialog(t.$index,t.row)}}},[e._v(" Ansible Playbook ")]),n("el-button",{attrs:{size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.showSetupCDNDialog(t.$index,t.row)}}},[e._v(" Setup CDN ")]),n("el-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.deleteInstance(t.$index,t.row)}}},[e._v(" Delete ")])]}}])})],1)]],2),n("el-tab-pane",{attrs:{label:"SSH Keys"}},[0==e.sshKeys.length?n("div",{staticClass:"empty-list"},[n("el-button",{attrs:{type:"primary"},on:{click:e.showAddSSHKeydDialog}},[e._v("Add SSH Key")])],1):[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showAddSSHKeydDialog}},[e._v("Add SSH Key")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.sshKeys}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"300"}}),n("el-table-column",{attrs:{prop:"name",label:"Name",width:"180"}}),n("el-table-column",{attrs:{prop:"date_created",label:"Created At",width:"200",formatter:e.dateFormatter}}),n("el-table-column",{attrs:{label:"Operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.deleteSSHKey(t.$index,t.row)}}},[e._v(" Delete ")])]}}])})],1)]],2)],1)],n("el-dialog",{attrs:{title:"VPS - Add Account",visible:e.dialogVisible,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.providerConfig,rules:e.rules,"label-width":"140px"}},[n("el-form-item",{attrs:{label:"Cloud Type"}},[n("el-select",{model:{value:e.providerConfig.type,callback:function(t){e.$set(e.providerConfig,"type",t)},expression:"providerConfig.type"}},e._l(e.types,(function(e){return n("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"Cloud Provider"}},[n("el-select",{model:{value:e.providerConfig.name,callback:function(t){e.$set(e.providerConfig,"name",t)},expression:"providerConfig.name"}},e._l(e.providers,(function(e){return n("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"Account",prop:"account"}},[n("el-input",{model:{value:e.providerConfig.account,callback:function(t){e.$set(e.providerConfig,"account",t)},expression:"providerConfig.account"}})],1),n("el-form-item",{attrs:{label:"API Key",prop:"apiKey"}},[n("el-input",{model:{value:e.providerConfig.apiKey,callback:function(t){e.$set(e.providerConfig,"apiKey",t)},expression:"providerConfig.apiKey"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.submitAccount}},[e._v("Confirm")]),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")])],1)],1)],1),n("el-dialog",{attrs:{title:"Add Instance",visible:e.dialogOfAddInstance,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogOfAddInstance=t}}},[n("el-form",{ref:"instanceForm",attrs:{model:e.instanceForm,"label-width":"140px"}},[n("el-form-item",{attrs:{label:"OS"}},[n("el-select",{model:{value:e.instanceForm.os_id,callback:function(t){e.$set(e.instanceForm,"os_id",t)},expression:"instanceForm.os_id"}},e._l(e.OSs,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"Plan"}},[n("el-select",{model:{value:e.instanceForm.plan,callback:function(t){e.$set(e.instanceForm,"plan",t)},expression:"instanceForm.plan"}},e._l(e.plans,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"Region"}},[n("el-select",{model:{value:e.instanceForm.region,callback:function(t){e.$set(e.instanceForm,"region",t)},expression:"instanceForm.region"}},e._l(e.regions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"RSA Key(SSH)"}},[n("el-select",{model:{value:e.instanceForm.rsa_key_id,callback:function(t){e.$set(e.instanceForm,"rsa_key_id",t)},expression:"instanceForm.rsa_key_id"}},e._l(e.RSAKeys4SSH,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.submitAddInstance}},[e._v("Confirm")]),n("el-button",{on:{click:function(t){e.dialogOfAddInstance=!1}}},[e._v("Cancel")])],1)],1)],1),n("el-dialog",{attrs:{title:"Setup CDN",visible:e.dialogOfSetupCDN,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogOfSetupCDN=t}}},[e.showZone?n("el-row",{attrs:{type:"flex",justify:"space-around"}},[n("el-col",{attrs:{span:8}},e._l(e.cloudflareZones,(function(t){return n("el-card",{key:t.id},[n("div",[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return n.preventDefault(),e.getZoneCDNRecords(t)}}},[e._v(e._s(t.name))])],1)])})),1)],1):n("el-row",{attrs:{type:"flex",justify:"space-around"}},[n("el-col",{attrs:{span:24}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.zoneDNSData,"highlight-current-row":""},on:{"current-change":e.zoneDNSSelectHandler}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{prop:"name",label:"Name"}}),n("el-table-column",{attrs:{prop:"content",label:"Current IP"}})],1)],1)],1),e.showBtn?n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.submitSetupCDN}},[e._v("Confirm")]),n("el-button",{on:{click:function(t){e.dialogOfSetupCDN=!1}}},[e._v("Cancel")])],1):e._e()],1),n("el-dialog",{attrs:{title:"Add SSH Key",visible:e.dialogOfAddSSHKey,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogOfAddSSHKey=t}}},[n("el-row",{attrs:{type:"flex",justify:"space-around"}},[n("el-col",{attrs:{span:24}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.localRSAKeys,"highlight-current-row":""},on:{"current-change":e.sshKeySelectHandler}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),n("el-table-column",{attrs:{prop:"name",label:"Name"}}),n("el-table-column",{attrs:{prop:"created_at",label:"Created At",formatter:e.timestampFormatter}})],1)],1)],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.submitAddSSHKey}},[e._v("Confirm")]),n("el-button",{on:{click:function(t){e.dialogOfAddSSHKey=!1}}},[e._v("Cancel")])],1)],1),e.dialogOfRunAnsible?n("ansible-run-panel",{attrs:{vultrCloudProvider:e.providerConfig,vultrInstance:e.vultrInstanceOfAnsible,RSAKeys:e.localRSAKeys},on:{closeAnsibleRunPanel:e.closeAnsibleRunPanel}}):e._e()],2)},a=[],r=(n("4de4"),n("d3b7"),n("a434"),n("b0c0"),n("159b"),n("c1df")),s=n.n(r),l=n("6294"),i=n("fc07"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:"Ansible Logs",visible:e.diglogVisibleOfTable,"destroy-on-close":""},on:{"update:visible":function(t){e.diglogVisibleOfTable=t}}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showRunDialog}},[e._v("Run Playbook")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.logs}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),n("el-table-column",{attrs:{prop:"ansible_playbook_name",label:"Playbook Name",width:"180"}}),n("el-table-column",{attrs:{prop:"status",label:"Status",width:"100"}}),n("el-table-column",{attrs:{prop:"created_at",label:"Created At",width:"180",formatter:e.timestampFormatter}}),n("el-table-column",{attrs:{prop:"updated_at",label:"Updated At",width:"180",formatter:e.timestampFormatter}}),n("el-table-column",{attrs:{label:"Operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.showViewDialog(t.$index,t.row)}}},[e._v(" Detail ")])]}}])})],1)],1),n("el-dialog",{attrs:{title:"Run Ansible",visible:e.diglogVisible,"destroy-on-close":""},on:{"update:visible":function(t){e.diglogVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.runForm,"label-width":"140px"}},[n("el-form-item",{attrs:{label:"Server IP",prop:"ip"}},[n("el-input",{staticStyle:{width:"120px"},attrs:{readonly:""},model:{value:e.runForm.ip,callback:function(t){e.$set(e.runForm,"ip",t)},expression:"runForm.ip"}}),n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",loading:e.IPchecking,size:"small"},on:{click:e.checkServerIPReachable}},[e._v("Ping IP")])],1),n("el-form-item",{attrs:{label:"RSA Key(SSH)"}},[n("el-select",{attrs:{readonly:""},model:{value:e.runForm.rsa_key_id,callback:function(t){e.$set(e.runForm,"rsa_key_id",t)},expression:"runForm.rsa_key_id"}},e._l(e.RSAKeys4SSH,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small",loading:e.sshChecking},on:{click:e.checkSSHReachable}},[e._v("Check SSH Connetion")])],1),n("el-form-item",{attrs:{label:"PlayBook"}},[n("el-select",{model:{value:e.runForm.playbook_name,callback:function(t){e.$set(e.runForm,"playbook_name",t)},expression:"runForm.playbook_name"}},e._l(e.playbooks,(function(e){return n("el-option",{key:e.filename,attrs:{label:e.filename,value:e.filename}})})),1),n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:e.showPlaybookContent}},[e._v("View")])],1),n("el-form-item",{attrs:{label:"Use Proxy"}},[n("el-radio",{attrs:{label:"true"},model:{value:e.runForm.use_proxy,callback:function(t){e.$set(e.runForm,"use_proxy",t)},expression:"runForm.use_proxy"}},[e._v("Yes")]),n("el-radio",{attrs:{label:"false"},model:{value:e.runForm.use_proxy,callback:function(t){e.$set(e.runForm,"use_proxy",t)},expression:"runForm.use_proxy"}},[e._v("No")])],1),"true"==e.runForm.use_proxy?[n("el-form-item",{attrs:{label:"Proxy Type"}},[n("el-select",{model:{value:e.runForm.proxy_type,callback:function(t){e.$set(e.runForm,"proxy_type",t)},expression:"runForm.proxy_type"}},e._l(e.proxyTypes,(function(e){return n("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"Proxy Host"}},[n("el-input",{staticStyle:{width:"180px"},model:{value:e.runForm.proxy_host,callback:function(t){e.$set(e.runForm,"proxy_host",t)},expression:"runForm.proxy_host"}})],1),n("el-form-item",{attrs:{label:"Proxy Port"}},[n("el-input",{staticStyle:{width:"180px"},model:{value:e.runForm.proxy_port,callback:function(t){e.$set(e.runForm,"proxy_port",t)},expression:"runForm.proxy_port"}})],1)]:e._e(),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.runAnsiblePlayBook}},[e._v("Run")]),n("el-button",{on:{click:function(t){e.diglogVisible=!1}}},[e._v("Cancel")])],1)],2)],1),n("el-dialog",{attrs:{title:"Playbook Content",visible:e.diglogVisibleOfPlaybook,"destroy-on-close":""},on:{"update:visible":function(t){e.diglogVisibleOfPlaybook=t}}},[n("div",{staticStyle:{margin:"0 20px"}},[n("codemirror",{attrs:{options:e.cmOptions},model:{value:e.fileContent,callback:function(t){e.fileContent=t},expression:"fileContent"}})],1)]),n("el-dialog",{attrs:{title:"Log Detail",visible:e.diglogVisibleOfDetail,"destroy-on-close":""},on:{"update:visible":function(t){e.diglogVisibleOfDetail=t}}},[n("el-form",{ref:"form2",attrs:{model:e.log,"label-width":"180px"}},[n("el-form-item",{attrs:{label:"Playbook Name"}},[n("el-input",{staticStyle:{width:"240px"},attrs:{readonly:""},model:{value:e.log.ansible_playbook_name,callback:function(t){e.$set(e.log,"ansible_playbook_name",t)},expression:"log.ansible_playbook_name"}})],1),n("el-form-item",{attrs:{label:"Playbook Content"}},[n("el-input",{attrs:{type:"textarea",readonly:""},model:{value:e.log.ansible_playbook_content,callback:function(t){e.$set(e.log,"ansible_playbook_content",t)},expression:"log.ansible_playbook_content"}})],1),n("el-form-item",{attrs:{label:"Host Config Content"}},[n("el-input",{attrs:{type:"textarea",readonly:""},model:{value:e.log.ansible_host_config,callback:function(t){e.$set(e.log,"ansible_host_config",t)},expression:"log.ansible_host_config"}})],1),n("el-form-item",{attrs:{label:"Extra Variables"}},[n("el-input",{attrs:{type:"textarea",readonly:""},model:{value:e.log.ansible_extra_variables,callback:function(t){e.$set(e.log,"ansible_extra_variables",t)},expression:"log.ansible_extra_variables"}})],1),n("el-form-item",{attrs:{label:"Playbook Command"}},[n("el-input",{attrs:{type:"textarea",readonly:""},model:{value:e.log.play_cmd,callback:function(t){e.$set(e.log,"play_cmd",t)},expression:"log.play_cmd"}})],1),n("el-form-item",{attrs:{label:"Command Result"}},[n("el-input",{attrs:{type:"textarea",readonly:""},model:{value:e.log.play_result,callback:function(t){e.$set(e.log,"play_result",t)},expression:"log.play_result"}})],1)],1)],1)],1)},u=[],d=n("8f94"),f=(n("a7be"),n("ced0"),n("cc10"),n("b775")),p=n("f367");function b(){return Object(f["a"])({url:"/ansible-playbooks",method:"get"})}function m(e){return Object(f["a"])({url:"/ansible-playbook/"+e,method:"get"})}function h(e){return Object(p["a"])({url:"/ip/"+e+"/ping",method:"post"})}function y(e){return Object(p["a"])({url:"/ssh/connection/check",method:"post",data:e})}var g={components:{codemirror:d["codemirror"]},data:function(){return{name:"AnsibleRunPanel",diglogVisible:!1,diglogVisibleOfTable:!0,diglogVisibleOfDetail:!1,diglogVisibleOfPlaybook:!1,IPchecking:!1,sshChecking:!1,runForm:{ip:"",playbook_name:"",rsa_key_id:"",use_proxy:"false"},fileContent:"",cmOptions:{tabSize:4,mode:"text/yaml",theme:"base16-light",line:!0},RSAKeys4SSH:[],playbooks:[],logs:[],log:{},proxyTypes:[{name:"Socks5",value:"socks5"},{name:"Http",value:"Http"},{name:"Https",value:"https"}]}},created:function(){var e=this;this.runForm.ip=this.vultrInstance.main_ip,this.RSAKeys4SSH=this.RSAKeys.filter((function(e){return 0==e.type})),Object(l["n"])(this.vultrCloudProvider.id,this.vultrInstance.id).then((function(t){e.logs=t.data,console.log(e.logs)})),b().then((function(t){Array.isArray(t.data)&&t.data.forEach((function(t,n){t.id=n,e.playbooks.push(t)}))})),Object(l["v"])(this.vultrCloudProvider.id,this.vultrInstance.id).then((function(t){0==t.code?e.runForm.rsa_key_id=t.data.local_rsa_key_id:e.runForm.rsa_key_id=3}))},props:["RSAKeys","vultrInstance","vultrCloudProvider"],watch:{diglogVisibleOfTable:function(){this.$emit("closeAnsibleRunPanel")}},methods:{checkServerIPReachable:function(){var e=this;this.IPchecking=!0,h(this.runForm.ip).then((function(t){e.IPchecking=!1;var n=t.data;if(0==n.code)if(100!=n.data.PacketLoss)e.$message({message:"Pinging "+e.runForm.ip+" succeed!",type:"success"});else{var o="Pinging "+e.runForm.ip+" failed!";e.$message.error(o)}else e.$message.error(n.msg)}))},checkSSHReachable:function(){var e=this;if(""!=this.runForm.rsa_key_id){this.sshChecking=!0;var t=this.RSAKeys.filter((function(t){return t.id==e.runForm.rsa_key_id})),n={username:"root",port:"22",ip:this.runForm.ip,rsa_private_key:t[0].private_key};y(n).then((function(t){var n=t.data;if(0!=n.code)return e.$message.error(n.msg),void(e.sshChecking=!1);e.sshChecking=!1,e.$message({message:"success!",type:"success"})}))}else this.$message({message:"Please select a RSA key",type:"warning"})},showRunDialog:function(){this.diglogVisible=!0},showViewDialog:function(e,t){this.diglogVisibleOfDetail=!0,this.log=t},showPlaybookContent:function(){var e=this;""!=this.runForm.playbook_name?m(this.runForm.playbook_name).then((function(t){e.fileContent=t.data,e.diglogVisibleOfPlaybook=!0})):this.$message({message:"Please select a playbook",type:"warning"})},runAnsiblePlayBook:function(){var e=this,t=!1;"true"==this.runForm.use_proxy&&(t=!0);var n={playbook_name:this.runForm.playbook_name,proxy_config:{use_proxy:t,proxy_type:this.runForm.proxy_type,proxy_host:this.runForm.proxy_host,proxy_port:this.runForm.proxy_port}};Object(l["y"])(this.vultrCloudProvider.id,this.vultrInstance.id,n).then((function(t){var n=t.data;0==n.code?(e.$message({message:"success!",type:"success"}),e.diglogVisible=!1,e.reloadOpsLogsUntilDone()):e.$message.error(n.msg)}))},timestampFormatter:function(e){var t=s.a.unix(e.created_at).format("YYYY-MM-DD HH:mm:ss");return t},reloadOpsLogsUntilDone:function(){var e=this;Object(l["n"])(this.vultrCloudProvider.id,this.vultrInstance.id).then((function(t){return e.logs=t.data,!0})).then((function(t){if(t){var n=!1;e.logs.forEach((function(e){"done"!=e.status&&(n=!0)})),n&&setTimeout((function(){e.reloadOpsLogsUntilDone()}),5e3)}else console.log("no logs yet.")}))}}},v=g,_=n("2877"),j=Object(_["a"])(v,c,u,!1,null,null,null),k=j.exports,S={name:"Provider",components:{AnsibleRunPanel:k},data:function(){return{dialogVisible:!1,dialogOfSetupCDN:!1,dialogOfAddSSHKey:!1,dialogOfAddInstance:!1,dialogOfRunAnsible:!1,showBtn:!1,showZone:!0,providerConfig:{},ProviderConfigOfCDN:{},vultrInstances:[],cloudflareZones:[],instanceForm:{rsa_key_id:"",os_id:387,plan:"vc2-1c-1gb",region:"lax",installed_by:"os_id"},OSs:[{id:387,name:"ubuntu_20.04"}],plans:[{id:"vc2-1c-1gb",name:"Cloud Compute-CPU(1)-Memory(1GB)"}],regions:[{id:"lax",name:"Los Angeles"}],zoneDNSData:[],zoneSelected:null,sshKeys:[],localRSAKeys:[],RSAKeys4SSH:[],localRSAKeySelected:null,zoneDNSRow:null,instanceSelected:null,vultrInstanceOfAnsible:null,types:[],providers:[],rules:{account:[{required:!0,message:"Please type in your account",trigger:"blur"}],apiKey:[{required:!0,message:"Please type in the api key of your account",trigger:"blur"}],apiSecret:[{required:!0,message:"Please type in the api secret of your account",trigger:"blur"}]},cloudConfigs:{vps:{name:"VPS",value:"vps",apiSecretVisible:!1,addBtnVisible:!0,providers:[{name:"Vultr",value:"vultr"}]},cdn:{name:"CDN",value:"cdn",apiSecretVisible:!1,addBtnVisible:!0,providers:[{name:"Cloudflare",value:"cloudflare"}]},domain:{name:"Domain",value:"domain",apiSecretVisible:!0,addBtnVisible:!0,providers:[{name:"Godaddy",value:"godaddy"}]}}}},created:function(){var e=this;Object(l["o"])({name:"vultr"}).then((function(t){var n=t.data;if(Array.isArray(n)&&0!=n.length){var o=JSON.parse(n[0].api_config);n[0].apiKey=o["api_key"],e.providerConfig=n[0],Object(l["e"])(e.providerConfig.id).then((function(t){Object(l["x"])(e.providerConfig.id).then((function(t){var n=t.data;Array.isArray(n)&&0!=n.length?e.vultrInstances=n:e.vultrInstances=e.getMockInstance()})),Object(l["w"])(e.providerConfig.id).then((function(t){var n=t.data;Array.isArray(n)&&0!=n.length?e.sshKeys=n:e.sshKeys=[]}))})).catch((function(e){}))}})),Object(l["o"])({name:"cloudflare"}).then((function(t){var n=t.data;Array.isArray(n)&&0!=n.length&&(e.ProviderConfigOfCDN=n[0],Object(l["c"])(e.ProviderConfigOfCDN.id).then((function(t){Object(l["t"])(e.ProviderConfigOfCDN.id).then((function(t){var n=t.data;if(Array.isArray(n)&&0!=n.length){e.cloudflareZones=n;for(var o=function(t){Object(l["r"])(e.ProviderConfigOfCDN.id,e.cloudflareZones[t].id).then((function(n){e.cloudflareZones[t].dnsRecords=n.data}))},a=0;a<e.cloudflareZones.length;a++)o(a)}}))})).catch((function(e){console.log(e)})))})),Object(i["c"])({type:0}).then((function(t){e.localRSAKeys=t.data,e.RSAKeys4SSH=e.localRSAKeys.filter((function(e){return 0==e.type}))}))},methods:{editProviderBtnHandler:function(e){this.types.splice(0,this.types.length),this.types.push(this.cloudConfigs[e]),this.providers=this.cloudConfigs[e]["providers"],this.dialogVisible=!0},submitAccount:function(){var e=this,t={name:this.providerConfig.name,type:this.providerConfig.type,account:this.providerConfig.account,vultr_config:{api_key:this.providerConfig.apiKey,ssh_key_id:"",ssh_private_key:""}};Object(l["l"])(this.providerConfig.id,t).then((function(t){e.$message({message:"Success",type:"success"}),e.dialogVisible=!1}))},dateFormatter:function(e){var t=s()(e.date_created).format("YYYY-MM-DD HH:mm:ss");return t},showAddInstanceDialog:function(){this.dialogOfAddInstance=!0,this.instanceForm.rsa_key_id=""},submitAddInstance:function(){var e=this;if(""!=this.instanceForm.rsa_key_id){var t=this.instanceForm;Object(l["i"])(this.providerConfig.id,t).then((function(t){e.$message({message:"Success",type:"success"}),e.dialogOfAddInstance=!1,e.vultrInstances.push(t.data),e.reloadVPSUtilIPIsReady()}))}else this.$message({message:"Please select a SSH Key",type:"warning"})},deleteInstance:function(e,t){var n=this;this.$confirm("Are you sure to delete ?","Tip",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){Object(l["k"])(n.providerConfig.id,t.id).then((function(e){n.$message({message:"Success",type:"success"}),n.vultrInstances=n.vultrInstances.filter((function(e){return e.id!==t.id}))}))}))},showAddSSHKeydDialog:function(){this.dialogOfAddSSHKey=!0,this.localRSAKeySelected=null},timestampFormatter:function(e){var t=s.a.unix(e.created_at).format("YYYY-MM-DD HH:mm:ss");return t},sshKeySelectHandler:function(e){this.localRSAKeySelected=e},submitAddSSHKey:function(){var e=this;if(this.localRSAKeys.length>1&&null==this.localRSAKeySelected)this.$message("Please select a SHH Key pair");else{1==this.localRSAKeys.length&&null==this.localRSAKeySelected&&(this.localRSAKeySelected=this.localRSAKeys[0]);var t={rsa_key_id:this.localRSAKeySelected.id};Object(l["b"])(this.providerConfig.id,t).then((function(t){e.$message({message:"Success",type:"success"}),e.dialogOfAddSSHKey=!1,e.sshKeys.push(t.data)}))}},deleteSSHKey:function(e,t){var n=this;this.$confirm("Are you sure to delete ?","Tip",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){Object(l["j"])(n.providerConfig.id,t.id).then((function(e){n.sshKeys=n.sshKeys.filter((function(e){return e.id!==t.id})),n.$message({message:"Success",type:"success"})}))}))},showSetupCDNDialog:function(e,t){this.dialogOfSetupCDN=!0,this.showBtn=!1,this.showZone=!0,this.instanceSelected=t,this.zoneSelected=null,this.zoneDNSRow=null},getZoneCDNRecords:function(e){this.showBtn=!0,this.showZone=!1,this.zoneSelected=e,this.zoneDNSData=e.dnsRecords},zoneDNSSelectHandler:function(e){this.zoneDNSRow=e},submitSetupCDN:function(){var e=this;if(this.zoneDNSData.length>1&&null==this.zoneDNSRow)this.$message("Please select a DNS record");else{1==this.zoneDNSData.length&&null==this.zoneDNSRow&&(this.zoneDNSRow=this.zoneDNSData[0]);var t={content:this.instanceSelected.main_ip,proxied:!0};Object(l["z"])(this.ProviderConfigOfCDN.id,this.zoneSelected.id,this.zoneDNSRow.id,t).then((function(t){e.$message({message:"Success",type:"success"}),e.dialogOfSetupCDN=!1,e.updateLocalZoneDNSRecords(e.zoneSelected);var n={label:e.zoneSelected.name,cdn_info:{cloud_provider_id:e.ProviderConfigOfCDN.id,zone_id:e.zoneSelected.id,dns_record_id:e.zoneDNSRow.id,domain:e.zoneSelected.name}};Object(l["B"])(e.providerConfig.id,e.instanceSelected.id,n)}))}},updateLocalZoneDNSRecords:function(e){for(var t=this,n=function(n){if(t.cloudflareZones[n].id!=e.id)return"continue";Object(l["r"])(t.ProviderConfigOfCDN.id,t.cloudflareZones[n].id).then((function(e){t.cloudflareZones[n].dnsRecords=e.data}))},o=0;o<this.cloudflareZones.length;o++)n(o)},showAnsibleRunDialog:function(e,t){this.dialogOfRunAnsible=!0,this.vultrInstanceOfAnsible=t},closeAnsibleRunPanel:function(){this.dialogOfRunAnsible=!1},reloadVPSUtilIPIsReady:function(){var e=this;Object(l["x"])(this.providerConfig.id).then((function(t){var n=t.data;return!(!Array.isArray(n)||0==n.length)&&(e.vultrInstances=n,!0)})).then((function(t){if(t){var n=!1;e.vultrInstances.forEach((function(e){"0.0.0.0"==e.main_ip&&(n=!0)})),n&&setTimeout((function(){e.reloadVPSUtilIPIsReady()}),5e3)}else console.log("no vps yet.")}))},getMockInstance:function(){var e='[\n    {\n      "id": "cb676a46-66fd-4dfb-b839-443f2e6c0b60",\n      "os": "CentOS SELinux 8 x64",\n      "ram": 2048,\n      "disk": 55,\n      "main_ip": "192.0.2.123",\n      "vcpu_count": 1,\n      "region": "atl",\n      "plan": "vc2-6c-16gb",\n      "date_created": "2020-10-10T01:56:20+00:00",\n      "status": "active",\n      "allowed_bandwidth": 2000,\n      "netmask_v4": "255.255.252.0",\n      "gateway_v4": "192.0.2.1",\n      "power_status": "running",\n      "server_status": "ok",\n      "v6_network": "2001:0db8:1112:18fb::",\n      "v6_main_ip": "2001:0db8:1112:18fb:0200:00ff:fe00:0000",\n      "v6_network_size": 64,\n      "label": "Example Instance",\n      "internal_ip": "",\n      "kvm": "https://my.vultr.com/subs/vps/novnc/api.php?data=00example11223344",\n      "hostname": "my_hostname",\n      "os_id": 215,\n      "app_id": 0,\n      "image_id": "",\n      "firewall_group_id": "",\n      "features": [\n        "ddos_protection",\n        "ipv6",\n        "auto_backups"\n      ],\n      "tags": [\n        "a tag",\n        "another"\n      ]\n    }\n  ]\n';return JSON.parse(e)}}},O=S,C=(n("d9eb"),Object(_["a"])(O,o,a,!1,null,"0cf570bf",null));t["default"]=C.exports},d9eb:function(e,t,n){"use strict";n("11fb")},f367:function(e,t,n){"use strict";n("d3b7");var o=n("bc3a"),a=n.n(o),r=(n("5c96"),n("4360")),s=n("5f87"),l=a.a.create({baseURL:"/api",withCredentials:!0,timeout:5e3});l.interceptors.request.use((function(e){return r["a"].getters.token&&(e.headers["JWT-Token"]=Object(s["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),t["a"]=l},fc07:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var o=n("b775");function a(e){return Object(o["a"])({url:"/rsa_keys",method:"get",params:e})}function r(e){return Object(o["a"])({url:"/rsa_key",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/rsa_key/"+e,method:"delete"})}}}]);